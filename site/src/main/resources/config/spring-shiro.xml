<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
	            http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
                http://www.springframework.org/schema/util
                http://www.springframework.org/schema/util/spring-util.xsd">

    <bean id="shiroFilter" class="org.apache.shiro.spring.web.ShiroFilterFactoryBean">
        <property name="securityManager" ref="securityManager"/>
        <property name="loginUrl" value="/index"/>
        <!--在controller中硬编码跳转-->
        <!--<property name="successUrl" value="/main"/>-->
        <property name="unauthorizedUrl" value=""/>
        <property name="filters">
            <util:map>
                <entry key="authc" value-ref="formAuthenticationFilter"/>
            </util:map>
        </property>
        <!--<property name="filterChainDefinitions">-->
        <!--<value>-->
        <!--/login = authc-->
        <!--/logout = logout-->
        <!--/authenticated = authc-->
        <!--/** = user-->
        <!--&lt;!&ndash;/login/tologin = anon&ndash;&gt;-->
        <!--&lt;!&ndash;/logout = logout&ndash;&gt;-->
        <!--&lt;!&ndash;/static/** = anon&ndash;&gt;-->
        <!--&lt;!&ndash;&lt;!&ndash; /** = user”表示访问该地址的用户是身份验证通过或RememberMe登录的都可以 &ndash;&gt;&ndash;&gt;-->
        <!--&lt;!&ndash;/user/** = authc&ndash;&gt;-->
        <!--</value>-->
        <!--</property>-->
    </bean>

    <bean id="shiroEhcacheManager" class="org.apache.shiro.cache.ehcache.EhCacheManager">
        <property name="cacheManagerConfigFile" value="classpath:ehcache-shiro.xml"/>
    </bean>

    <bean id="securityManager" class="org.apache.shiro.web.mgt.DefaultWebSecurityManager">
        <property name="realm" ref="myShiroRealm"/>
        <property name="cacheManager" ref="shiroEhcacheManager"/>
        <!--<property name="sessionManager" ref="defaultWebSessionManager"/>-->
        <!--<property name="rememberMeManager" ref="rememberMeManager"/>-->
    </bean>

    <bean id="myShiroRealm" class="com.young.security.MyShiroRealm">
        <!-- userDao 用来实现用户名密码的查询 -->
        <property name="userDao" ref="userDao"/>
        <!--<property name="cacheManager" ref="shiroCacheManager"/>-->
    </bean>

    <bean id="lifecycleBeanPostProcessor"
          class="org.apache.shiro.spring.LifecycleBeanPostProcessor"/>


    <bean id="formAuthenticationFilter"
          class="org.apache.shiro.web.filter.authc.FormAuthenticationFilter"/>



</beans>